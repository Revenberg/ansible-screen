---
- name: Hello Ansible - quick start
  hosts: rpi
  become_user: root
  become: yes
      
  tasks:    
    - name: Update apt-get cache
      apt: >
        update_cache=yes
        cache_valid_time=3600
    
    - name: Update all packages to the latest version
      apt: > 
        upgrade=yes
        
    - name: Install "lightdm" package nodig?
      apt: 
        name: lightdm
    
    - name: Install "LXDE" package 
      apt: 
        name: LXDE
    
    - name: Install "xinit" package 
      apt: 
        name: xinit          
        
    - name: Copy file LCD-show.tar.gz
      copy:
        src: ./LCD-show.tar.gz
        dest: /home/pi/LCD-show.tar.gz
        owner: pi
        group: pi
        mode: 0644
    
    - name: untar
      unarchive:
        src: ./LCD-show.tar.gz
        creates: /home/pi/LCD-show/LCD35-show
        dest: /home/pi

    - name: activate
      shell: ./LCD35-show
      args:
        chdir: /home/pi/LCD-show/
        creates: /etc/X11/xorg.conf.d

    - name: Install "xserver-xorg-video-fbdev" package 
      apt: 
        name: xserver-xorg-video-fbdev
       
    - name: Copy file 99-fbdev.conf
      copy:
        src: ./99-fbdev.conf
        dest: /usr/share/X11/xorg.conf.d/99-fbdev.conf
    
    - name: Display
      command: export DISPLAY=:0.0
